{
  "generators": {
  },
  "environment": {
    "service": {
      "mdlp-sgtin-comparator": {
        "type": "spring-boot-application",
        "database": [
          {
            "field-name": "database-1",
            "url-path": "spring.datasource.url",
            "password-path": "spring.datasource.password",
            "user-path": "spring.datasource.user"
          }
        ],
        "set": [
          {
            "key": "spring.liquidbase.enable",
            "values": false
          }
        ]
      }
    },
    "database": {
      "mdlp-sgtin-comparator-db": {
        "image": "posgre-alphine",
        "schema": "name"
      }
    }
  },
  "scenarios": [
    {
      "name": "test1",
      "steps": [
        {
          "uses": "upDB",
          "id": "upDb:posgre",
          "with": {
            "database": {
              "type": "StringField",
              "value": "postgreSQL"
            },
            "database-name": {
              "type": "StringField",
              "value": "mdlp-sgtin-comparator-db"
            }
          }
        },
        {
          "uses": "upService",
          "id": "up:1",
          "with": {
            "type": {
              "type": "StringField",
              "value": "SERVICE"
            },
            "name": {
              "type": "StringField",
              "value": "mdlp-sgtin-comparator"
            },
            "isMock": {
              "type": "StringField",
              "value": "false"
            },
            "database-1": {
              "type": "ObjectField",
              "value": "upDb:posgre"
            }
          }
        },
        {
          "uses": "rest",
          "id": "rest:1",
          "with": {
            "host": {
              "type": "LinkedField",
              "value": "${up:1.host}"
            },
            "type": {
              "type": "StringField",
              "value": "POST"
            },
            "url": {
              "type": "StringField",
              "value": "/someurl/2"
            }
          }
        },
        {
          "uses": "rest",
          "id": "rest:2",
          "with": {
            "host": {
              "type": "LinkedField",
              "value": "${up:1.host}"
            },
            "type": {
              "type": "StringField",
              "value": "POST"
            },
            "url": {
              "type": "StringField",
              "value": "/someurl"
            },
            "body": {
              "type": "MapField",
              "value": [
                {
                  "key": "flag",
                  "value": true
                },
                {
                  "key": "date",
                  "value": "2018-01-01"
                }
              ]
            },
            "headers": {
              "type": "MapField",
              "value": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ]
            }
          }
        },
        {
          "uses": "assert",
          "id": "assert:1",
          "with": {
            "asserts": {
              "type": "AssertMapField",
              "value": [
                {
                  "actual": "${rest:2.body.id}",
                  "expected": 2
                },
                {
                  "actual": "${rest:2.status}",
                  "expected": "200"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}